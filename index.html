<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>Turkey Hunt - Neon Bread Studios</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Press Start 2P', monospace;
            background: linear-gradient(to bottom, #2c1810 0%, #4a2c1a 50%, #6b4423 100%);
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #gameContainer {
            position: relative;
            width: 375px;
            max-width: 100vw;
            height: 667px;
            max-height: 100vh;
            background: linear-gradient(to bottom, #87CEEB 0%, #FFA07A 50%, #FF8C42 100%);
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        
        @media (max-width: 375px) {
            #gameContainer {
                width: 100vw;
                height: 100vh;
                max-width: none;
                max-height: none;
            }
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }
        
        #titleScreen, #endScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 50%, #C1666B 100%);
            z-index: 1000;
            text-align: center;
            padding: 20px;
        }
        
        .hidden {
            display: none !important;
        }
        
        h1 {
            font-size: 36px;
            color: #FFD700;
            text-shadow: 4px 4px 0px #8B4513, 6px 6px 0px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            line-height: 1.4;
        }
        
        h2 {
            font-size: 16px;
            color: #FFFFFF;
            text-shadow: 2px 2px 0px #8B4513;
            margin-bottom: 40px;
        }
        
        .subtitle {
            font-size: 14px;
            color: #FFF8DC;
            text-shadow: 2px 2px 0px #8B4513;
            margin-bottom: 30px;
        }
        
        button {
            font-family: 'Press Start 2P', monospace;
            font-size: 16px;
            padding: 15px 30px;
            background: linear-gradient(to bottom, #FFD700 0%, #FFA500 100%);
            color: #8B4513;
            border: 4px solid #8B4513;
            border-radius: 0;
            cursor: pointer;
            text-shadow: 1px 1px 0px rgba(255,255,255,0.5);
            box-shadow: 0 6px 0 #654321, 0 8px 10px rgba(0,0,0,0.3);
            transition: all 0.1s;
            margin: 10px;
        }
        
        button:hover {
            background: linear-gradient(to bottom, #FFED4E 0%, #FFB347 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 0 #654321, 0 10px 15px rgba(0,0,0,0.3);
        }
        
        button:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #654321, 0 3px 5px rgba(0,0,0,0.3);
        }
        
        .leaves-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        
        .leaf {
            position: absolute;
            font-size: 24px;
            animation: fall linear infinite;
            opacity: 0.8;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-50px) rotate(0deg);
            }
            100% {
                transform: translateY(750px) rotate(360deg);
            }
        }
        
        #hud {
            position: absolute;
            top: 50px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 100;
            pointer-events: none;
        }
        
        .hud-item {
            background: rgba(0, 0, 0, 0.7);
            border: 3px solid #FFD700;
            padding: 10px 15px;
            font-size: 12px;
            color: #FFD700;
            text-shadow: 1px 1px 0px #000;
            box-shadow: 0 4px 0 rgba(0,0,0,0.5);
        }
        
        #endStats {
            font-size: 24px;
            color: #FFD700;
            text-shadow: 3px 3px 0px #8B4513;
            margin: 30px 0;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- Title Screen -->
        <div id="titleScreen">
            <div class="leaves-container" id="titleLeaves"></div>
            <h1>TURKEY<br>HUNT</h1>
            <h2 class="subtitle">Earn that Thanksgiving Bonus!</h2>
            <button id="startBtn">CLICK TO START</button>
            <p style="color: #FFF8DC; font-size: 10px; margin-top: 20px; text-shadow: 1px 1px 0px #8B4513;">¬© 2025 Neon Bread Studios</p>
        </div>
        
        <!-- Game Canvas -->
        <canvas id="gameCanvas"></canvas>
        
        <!-- HUD -->
        <div id="hud" class="hidden">
            <div class="hud-item" id="earnings">EARNINGS: $0</div>
            <div class="hud-item" id="timer">TIME: 30</div>
        </div>
        
        <!-- End Screen -->
        <div id="endScreen" class="hidden">
            <h1>GAME OVER</h1>
            <div id="endStats">You Earned: $0</div>
            <button id="playAgainBtn">PLAY AGAIN</button>
        </div>
    </div>
    
    <script>
        // Game constants based on Neon Bread specs
        const VIEWPORT_WIDTH = 375;
        const VIEWPORT_HEIGHT = 667;
        const DISTANCE_UNIT = 3.75; // 1 foot = 3.75px
        const GAME_DURATION = 30; // seconds
        
        // Game variables
        let canvas, ctx, scale;
        let gameState = 'title'; // title, playing, ended
        let totalEarnings = 0;
        let timeRemaining = GAME_DURATION;
        let gameTimer;
        
        // Turkey management
        let turkeys = [];
        let activeTurkeyCount = 1;
        let visibilityDuration = 5000; // ms
        const MIN_VISIBILITY = 1000; // ms
        const VISIBILITY_DECAY = 0.9;
        const EARNINGS_PER_HIT = 20;
        const TURKEY_COUNT_INCREASE = 0.25;
        
        // Sprite images as data URIs (embedded to avoid CORS)
        let bushImg, cloudImg, turkeyImg;
        let assetsLoaded = false;
        
        // Ground and positioning
        let groundY;
        let bushPositions = [];
        const NUM_BUSHES = 8;
        
        // Initialize
        function init() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            setupCanvas();
            loadAssets();
            createTitleLeaves();
            
            document.getElementById('startBtn').addEventListener('click', startGame);
            document.getElementById('playAgainBtn').addEventListener('click', resetGame);
            canvas.addEventListener('click', handleClick);
            canvas.addEventListener('touchstart', handleTouch, {passive: false});
            
            window.addEventListener('resize', setupCanvas);
        }
        
        function setupCanvas() {
            const container = document.getElementById('gameContainer');
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            
            scale = containerWidth / VIEWPORT_WIDTH;
            
            canvas.width = containerWidth;
            canvas.height = containerHeight;
            
            groundY = containerHeight - 100 * scale;
            
            // Calculate bush positions
            bushPositions = [];
            const bushSpacing = containerWidth / NUM_BUSHES;
            for (let i = 0; i < NUM_BUSHES; i++) {
                bushPositions.push({
                    x: i * bushSpacing + bushSpacing / 2,
                    y: groundY
                });
            }
        }
        
        function loadAssets() {
            // Create simple SVG-based sprites as data URIs
            
            // Bush sprite
            const bushSvg = `<svg width="60" height="50" xmlns="http://www.w3.org/2000/svg">
                <ellipse cx="30" cy="35" rx="28" ry="20" fill="#2d5016"/>
                <ellipse cx="15" cy="30" rx="15" ry="15" fill="#3a6b1f"/>
                <ellipse cx="45" cy="30" rx="15" ry="15" fill="#3a6b1f"/>
                <ellipse cx="30" cy="25" rx="18" ry="18" fill="#4a8028"/>
            </svg>`;
            
            bushImg = new Image();
            bushImg.src = 'data:image/svg+xml;base64,' + btoa(bushSvg);
            
            // Cloud sprite
            const cloudSvg = `<svg width="80" height="40" xmlns="http://www.w3.org/2000/svg">
                <ellipse cx="20" cy="25" rx="15" ry="12" fill="#ffffff" opacity="0.9"/>
                <ellipse cx="40" cy="20" rx="20" ry="15" fill="#ffffff" opacity="0.9"/>
                <ellipse cx="60" cy="25" rx="15" ry="12" fill="#ffffff" opacity="0.9"/>
            </svg>`;
            
            cloudImg = new Image();
            cloudImg.src = 'data:image/svg+xml;base64,' + btoa(cloudSvg);
            
            // Turkey sprite - 8-bit pixel art style
            const turkeySvg = `<svg width="50" height="60" xmlns="http://www.w3.org/2000/svg">
                <!-- Tail feathers -->
                <rect x="5" y="10" width="8" height="20" fill="#8B4513"/>
                <rect x="13" y="5" width="8" height="25" fill="#CD853F"/>
                <rect x="21" y="8" width="8" height="22" fill="#D2691E"/>
                <rect x="29" y="5" width="8" height="25" fill="#8B4513"/>
                <rect x="37" y="10" width="8" height="20" fill="#A0522D"/>
                
                <!-- Body -->
                <ellipse cx="25" cy="35" rx="15" ry="18" fill="#8B4513"/>
                
                <!-- Head -->
                <ellipse cx="25" cy="20" rx="8" ry="10" fill="#D2691E"/>
                
                <!-- Beak -->
                <polygon points="25,18 30,20 25,22" fill="#FFA500"/>
                
                <!-- Eye -->
                <circle cx="27" cy="18" r="2" fill="#000000"/>
                
                <!-- Wattle -->
                <ellipse cx="25" cy="25" rx="3" ry="5" fill="#DC143C"/>
                
                <!-- Legs -->
                <rect x="18" y="50" width="3" height="8" fill="#FFA500"/>
                <rect x="29" y="50" width="3" height="8" fill="#FFA500"/>
            </svg>`;
            
            turkeyImg = new Image();
            turkeyImg.src = 'data:image/svg+xml;base64,' + btoa(turkeySvg);
            
            // Wait for all images to load
            let loadCount = 0;
            const checkLoad = () => {
                loadCount++;
                if (loadCount === 3) {
                    assetsLoaded = true;
                }
            };
            
            bushImg.onload = checkLoad;
            cloudImg.onload = checkLoad;
            turkeyImg.onload = checkLoad;
        }
        
        function createTitleLeaves() {
            const container = document.getElementById('titleLeaves');
            const leaves = ['üçÅ', 'üçÇ', 'üçÉ'];
            
            for (let i = 0; i < 15; i++) {
                const leaf = document.createElement('div');
                leaf.className = 'leaf';
                leaf.textContent = leaves[Math.floor(Math.random() * leaves.length)];
                leaf.style.left = Math.random() * 100 + '%';
                leaf.style.animationDuration = (5 + Math.random() * 5) + 's';
                leaf.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(leaf);
            }
        }
        
        function startGame() {
            if (!assetsLoaded) {
                setTimeout(startGame, 100);
                return;
            }
            
            document.getElementById('titleScreen').classList.add('hidden');
            document.getElementById('hud').classList.remove('hidden');
            
            gameState = 'playing';
            totalEarnings = 0;
            timeRemaining = GAME_DURATION;
            activeTurkeyCount = 1;
            visibilityDuration = 5000;
            turkeys = [];
            
            updateHUD();
            
            // Start game timer
            gameTimer = setInterval(() => {
                timeRemaining--;
                updateHUD();
                
                if (timeRemaining <= 0) {
                    endGame();
                }
            }, 1000);
            
            // Spawn initial turkeys
            spawnTurkeys();
            
            // Start game loop
            lastTime = performance.now();
            requestAnimationFrame(gameLoop);
        }
        
        function spawnTurkeys() {
            // Spawn new turkeys based on active count
            for (let i = 0; i < activeTurkeyCount && turkeys.length < activeTurkeyCount; i++) {
                setTimeout(() => {
                    if (gameState === 'playing') {
                        spawnTurkey();
                    }
                }, i * 500);
            }
        }
        
        function spawnTurkey() {
            if (gameState !== 'playing') return;
            
            const bushIndex = Math.floor(Math.random() * NUM_BUSHES);
            const bush = bushPositions[bushIndex];
            
            const turkey = {
                x: bush.x,
                y: bush.y,
                bushIndex: bushIndex,
                state: 'rising', // rising, visible, hiding, hidden
                riseProgress: 0,
                visibleTime: 0,
                riseSpeed: 0.05,
                turkeyHeight: 60 * scale,
                turkeyWidth: 50 * scale,
                hit: false
            };
            
            turkeys.push(turkey);
        }
        
        function updateTurkeys(deltaTime) {
            for (let i = turkeys.length - 1; i >= 0; i--) {
                const turkey = turkeys[i];
                
                if (turkey.hit) {
                    turkeys.splice(i, 1);
                    continue;
                }
                
                switch (turkey.state) {
                    case 'rising':
                        turkey.riseProgress += turkey.riseSpeed;
                        if (turkey.riseProgress >= 1) {
                            turkey.riseProgress = 1;
                            turkey.state = 'visible';
                            turkey.visibleTime = 0;
                        }
                        break;
                        
                    case 'visible':
                        turkey.visibleTime += deltaTime;
                        if (turkey.visibleTime >= visibilityDuration) {
                            turkey.state = 'hiding';
                        }
                        break;
                        
                    case 'hiding':
                        turkey.riseProgress -= turkey.riseSpeed;
                        if (turkey.riseProgress <= 0) {
                            turkey.riseProgress = 0;
                            turkeys.splice(i, 1);
                            // Respawn after hiding
                            setTimeout(() => {
                                if (gameState === 'playing') {
                                    spawnTurkey();
                                }
                            }, 500);
                        }
                        break;
                }
            }
        }
        
        function handleClick(e) {
            if (gameState !== 'playing') return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            checkTurkeyHit(x, y);
        }
        
        function handleTouch(e) {
            if (gameState !== 'playing') return;
            
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            checkTurkeyHit(x, y);
        }
        
        function checkTurkeyHit(x, y) {
            for (let turkey of turkeys) {
                if (turkey.state === 'visible' || turkey.state === 'rising') {
                    const turkeyX = turkey.x - turkey.turkeyWidth / 2;
                    const turkeyY = turkey.y - turkey.turkeyHeight * turkey.riseProgress;
                    
                    if (x >= turkeyX && x <= turkeyX + turkey.turkeyWidth &&
                        y >= turkeyY && y <= turkeyY + turkey.turkeyHeight) {
                        
                        hitTurkey(turkey);
                        playHitSound();
                        return;
                    }
                }
            }
        }
        
        function hitTurkey(turkey) {
            turkey.hit = true;
            totalEarnings += EARNINGS_PER_HIT;
            
            // Increase difficulty
            activeTurkeyCount = Math.ceil(activeTurkeyCount * (1 + TURKEY_COUNT_INCREASE));
            visibilityDuration = Math.max(MIN_VISIBILITY, visibilityDuration * VISIBILITY_DECAY);
            
            updateHUD();
            
            // Spawn new turkey immediately
            setTimeout(() => {
                if (gameState === 'playing') {
                    spawnTurkey();
                }
            }, 100);
        }
        
        function updateHUD() {
            document.getElementById('earnings').textContent = `EARNINGS: $${totalEarnings}`;
            document.getElementById('timer').textContent = `TIME: ${timeRemaining}`;
        }
        
        function endGame() {
            gameState = 'ended';
            clearInterval(gameTimer);
            
            document.getElementById('hud').classList.add('hidden');
            document.getElementById('endStats').textContent = `You Earned: $${totalEarnings}`;
            document.getElementById('endScreen').classList.remove('hidden');
            
            playGameOverSound();
        }
        
        function resetGame() {
            document.getElementById('endScreen').classList.add('hidden');
            startGame();
        }
        
        // Game loop
        let lastTime = 0;
        function gameLoop(timestamp) {
            if (gameState !== 'playing') return;
            
            const deltaTime = timestamp - lastTime;
            lastTime = timestamp;
            
            updateTurkeys(deltaTime);
            render();
            
            requestAnimationFrame(gameLoop);
        }
        
        function render() {
            if (!assetsLoaded) return;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw background
            drawSky();
            
            // Draw clouds
            drawClouds();
            
            // Draw falling leaves
            drawFallingLeaves();
            
            // Draw ground
            drawGround();
            
            // Draw turkeys (behind bushes)
            drawTurkeys();
            
            // Draw bushes
            drawBushes();
        }
        
        function drawSky() {
            const gradient = ctx.createLinearGradient(0, 0, 0, groundY);
            gradient.addColorStop(0, '#87CEEB');
            gradient.addColorStop(0.5, '#FFA07A');
            gradient.addColorStop(1, '#FF8C42');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, groundY);
        }
        
        function drawClouds() {
            const cloudSize = 80 * scale;
            const positions = [
                {x: 0.2, y: 0.15},
                {x: 0.5, y: 0.1},
                {x: 0.8, y: 0.2},
                {x: 0.35, y: 0.25}
            ];
            
            positions.forEach(pos => {
                ctx.drawImage(
                    cloudImg,
                    pos.x * canvas.width - cloudSize / 2,
                    pos.y * canvas.height,
                    cloudSize,
                    cloudSize * 0.5
                );
            });
        }
        
        function drawFallingLeaves() {
            const leaves = ['üçÅ', 'üçÇ', 'üçÉ'];
            const time = Date.now() / 1000;
            
            ctx.font = `${20 * scale}px serif`;
            for (let i = 0; i < 8; i++) {
                const x = ((time * 20 + i * 50) % canvas.width);
                const y = ((time * 30 + i * 80) % canvas.height);
                const leafIndex = i % leaves.length;
                
                ctx.fillText(leaves[leafIndex], x, y);
            }
        }
        
        function drawGround() {
            // Grass
            ctx.fillStyle = '#228B22';
            ctx.fillRect(0, groundY, canvas.width, 60 * scale);
            
            // Soil
            ctx.fillStyle = '#654321';
            ctx.fillRect(0, groundY + 60 * scale, canvas.width, canvas.height - groundY - 60 * scale);
        }
        
        function drawBushes() {
            const bushWidth = 60 * scale;
            const bushHeight = 50 * scale;
            
            bushPositions.forEach(bush => {
                ctx.drawImage(
                    bushImg,
                    bush.x - bushWidth / 2,
                    bush.y - bushHeight / 2,
                    bushWidth,
                    bushHeight
                );
            });
        }
        
        function drawTurkeys() {
            turkeys.forEach(turkey => {
                if (turkey.riseProgress > 0) {
                    const drawX = turkey.x - turkey.turkeyWidth / 2;
                    const drawY = turkey.y - turkey.turkeyHeight * turkey.riseProgress;
                    
                    ctx.drawImage(
                        turkeyImg,
                        drawX,
                        drawY,
                        turkey.turkeyWidth,
                        turkey.turkeyHeight
                    );
                }
            });
        }
        
        // Sound effects (8-bit style using Web Audio API)
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        function playHitSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.1);
            oscillator.type = 'square';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.15);
        }
        
        function playGameOverSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.5);
            oscillator.type = 'sawtooth';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }
        
        // Start the game
        window.addEventListener('load', init);
    </script>
</body>
</html>
